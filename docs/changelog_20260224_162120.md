# clarc v0.2.1 â€” Changelog

**Date**: 2026-02-24

## Change 1: Agent Bubbles Collapsed on Project Page

- Sessions with many sub-agents no longer dominate the timeline
- Shows max 2 agents inline per session; additional agents collapsed behind a "+N more" pill
- Click pill to expand/collapse the full agent list
- Agent descriptions truncated to keep layout compact

## Change 2: Help Link Always Visible

- Removed Help from the main nav items list
- Pinned "Help & Guide" link to the bottom of the sidebar with a separator border
- Always visible regardless of project count or scroll position
- Follows the same active-state styling as other nav items

## Change 3: Full Agent Page + Resizable Context Panel

### Full Agent Page (`/agents/:projectId/:agentId`)
- Dedicated full-page view for sub-agent conversations
- Glass header with breadcrumbs: project > parent session > agent
- Full conversation display using ConversationTurn grouping
- Show/Hide Thinking toggle, ScrollProgress bar, ScrollNav pill
- Metadata badges: model, message count, tokens, cost
- "Parent Session" button to navigate back

### Agent Navigation
- Agent clicks on project timeline now navigate to the full agent page (not side panel)
- Agent chips on session header also navigate to the full agent page
- Panel footer shows "Open full agent view" link when viewing agents in panel

### Resizable Context Panel
- Drag handle on the left edge of the panel for resizing
- Width clamped between 320px and 70% of viewport
- Width persists in localStorage across sessions
- Visual indicator highlights on hover/drag
- Dynamic `marginRight` on main content adapts to panel width

## Change 4: Portable Data Directory

- Compiled binary now stores synced data in `data/` next to the executable
- Dev mode unchanged (uses `~/.config/clarc/data/`)
- New `CLARC_DATA_DIR` env var for explicit override
- `sync-state.json` moved inside `data/` directory (travels with the data)
- Added `data/` to `.gitignore`
- Portability: copy `clarc` binary + `data/` folder to a new machine to preserve all history

---

## File Change Summary

### New Files (1)

| File | Category |
|------|----------|
| `src/ui/pages/AgentDetail.tsx` | Full agent conversation page |

### Modified Files (9)

| File | Changes |
|------|---------|
| `src/shared/paths.ts` | Portable DATA_DIR, SYNC_STATE_FILE into DATA_DIR, CLARC_DATA_DIR env var |
| `src/data/sync.ts` | Updated mkdir to use DATA_DIR instead of CONFIG_DIR |
| `src/ui/components/SessionTimeline.tsx` | Collapsed agent bubbles, navigate on click |
| `src/ui/components/Sidebar.tsx` | Help link pinned to bottom |
| `src/ui/pages/AgentDetail.tsx` | New full agent page |
| `src/ui/App.tsx` | Added `/agents/:projectId/:agentId` route |
| `src/ui/pages/SessionDetail.tsx` | Agent chips navigate to agent page |
| `src/ui/components/ContextPanelProvider.tsx` | Added panelWidth to context, localStorage persistence |
| `src/ui/components/ContextPanel.tsx` | Resize drag handle, dynamic width |
| `src/ui/components/Layout.tsx` | Dynamic marginRight from panelWidth |
| `.gitignore` | Added `data/` |
