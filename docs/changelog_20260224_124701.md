# clarc v0.2 — Changelog

**Date**: 2026-02-24

## Phase 1: Data Sync Architecture
- Transparent sync layer: `~/.claude/` (read-only source) → `~/.config/clarc/data/` (local working copy)
- Add-only sync (never deletes), runs at startup + every 5 minutes
- API endpoints: `GET /api/sync/status`, `POST /api/sync`

## Phase 2: Visual Design System
- ~50 CSS custom properties, 15 keyframe animations, utility classes (`.glass`, `.card`, `.btn-primary`, `.text-gradient`, `.stagger-children`)
- 8 shared components: Skeleton, PageTransition, StatCard, ChartCard, EmptyState, Badge, Icons (24 SVG), Tooltip

## Phase 3: Context Panel
- Artifact-style side panel (480px) that slides from right
- Supports agent conversations, session previews, tool details, file content
- History stack with back-navigation

## Phase 4: Component Visual Upgrades
- **ThinkingBlock**: Smooth max-height expand/collapse, rotating SVG chevron, gradient left border, badge token count
- **ToolCallBlock**: Same animations, per-tool icons, pulsing error dot, "open in panel" button
- **MessageRenderer**: Avatar circles, bubble-style cards, cost badges (green/amber/red), `onToolClick` prop
- **CodeBlock**: macOS terminal dots, copy with checkmark animation
- **Sidebar**: Gradient logo, nav icons, active state with accent bar, hover chevrons on projects
- **KeyboardShortcuts**: Backdrop blur, scale-in animation, physical key styling

## Phase 5: Page-Level Redesigns
- **Dashboard**: Gradient hero, recharts AreaChart, shared StatCards, card-glow projects
- **ProjectDetail**: SessionTimeline with vertical rail, date grouping, clickable agents (opens panel)
- **SessionDetail**: Glass header, conversation turns with turn numbers, ScrollProgress bar, ScrollNav pill, clickable agent chips
- **Analytics**: 6 recharts (cost by model, cost over time, token usage, activity by hour), GitHub-style heatmap, circular cache indicator
- **Search**: Glass search bar, skeleton loading, staggered card results
- **Tasks**: Kanban with colored column headers, card items with pulsing blocked indicators
- **MarkdownPreview**: Glass toolbar, toggle switches

## Phase 6: Keyboard & Polish
- `[`/`]` navigate between sessions within a project
- Escape closes context panel with priority over help overlay

---

## File Change Summary

### New Files (21)

| File | Category |
|------|----------|
| `src/data/sync.ts` | Data sync |
| `src/data/sync-scheduler.ts` | Data sync |
| `src/server/routes/sync.ts` | Data sync API |
| `src/ui/components/Skeleton.tsx` | Visual |
| `src/ui/components/PageTransition.tsx` | Visual |
| `src/ui/components/StatCard.tsx` | Visual |
| `src/ui/components/ChartCard.tsx` | Visual |
| `src/ui/components/EmptyState.tsx` | Visual |
| `src/ui/components/Badge.tsx` | Visual |
| `src/ui/components/Icons.tsx` | Visual |
| `src/ui/components/Tooltip.tsx` | Visual |
| `src/ui/components/ContextPanelProvider.tsx` | UX |
| `src/ui/components/ContextPanel.tsx` | UX |
| `src/ui/components/SessionTimeline.tsx` | UX |
| `src/ui/components/ConversationTurn.tsx` | UX |
| `src/ui/components/ScrollProgress.tsx` | UX |
| `src/ui/components/ScrollNav.tsx` | UX |
| `src/ui/hooks/useSessionNavigation.ts` | Keyboard |
| `docs/V0.2_PLAN.md` | Documentation |
| `docs/changelog_20260224_124701.md` | Documentation |

### Modified Files (20)

| File | Changes |
|------|---------|
| `src/shared/paths.ts` | Redirect paths to local data copy |
| `src/shared/types.ts` | Add SyncState, SyncedFile, SyncStatus types |
| `src/server/index.ts` | Mount sync route, init sync at startup |
| `src/server/routes/system.ts` | Sync info in status, sync before reindex |
| `src/cli/index.ts` | preAction sync hook |
| `index.html` | Google Fonts links |
| `src/ui/styles/globals.css` | Full overhaul: tokens, keyframes, utilities |
| `src/ui/components/Layout.tsx` | Context panel, sidebar animation, page transitions |
| `src/ui/components/Sidebar.tsx` | Icons, hover effects, active states, logo |
| `src/ui/components/ThinkingBlock.tsx` | Smooth animation, chevron, gradient border |
| `src/ui/components/ToolCallBlock.tsx` | Animation, icons, onExpand prop |
| `src/ui/components/MessageRenderer.tsx` | Bubbles, avatars, onToolClick prop |
| `src/ui/components/CodeBlock.tsx` | Terminal dots, copy animation |
| `src/ui/components/KeyboardShortcuts.tsx` | Backdrop blur, scale animation |
| `src/ui/pages/Dashboard.tsx` | Skeleton, hero, recharts, stat cards |
| `src/ui/pages/ProjectDetail.tsx` | Timeline, clickable agents |
| `src/ui/pages/SessionDetail.tsx` | Glass header, turns, scroll nav, session keyboard nav |
| `src/ui/pages/Analytics.tsx` | Full recharts, heatmap, new charts |
| `src/ui/pages/Search.tsx` | Enhanced search bar, result cards |
| `src/ui/pages/Tasks.tsx` | Kanban polish, empty state |
| `src/ui/pages/MarkdownPreview.tsx` | Glass toolbar, toggle switches |
| `src/ui/hooks/useKeyboard.ts` | Panel escape, session navigation shortcuts |
